[Unit]
After={{ kolla_service_unit_prefix }}{{ item.0 }}{{ kolla_service_unit_suffix }}.service
{% if item.0 not in (kolla_service_one_shot | default({})) %}
Wants={{ kolla_service_unit_prefix }}{{ item.0 }}{{ kolla_service_unit_suffix }}.service
{% endif -%}

[Service]
{% set post_delay = vars.get(item.1 ~ '_post_healthy_delay', kolla_post_healthy_delay) %}
TimeoutStartSec={{ kolla_service_start_timeout }}
{% if item.0 not in (kolla_service_one_shot | default({})) %}
ExecStartPre=/usr/local/lib/kolla/wait-unit-and-container-healthy.sh {{ kolla_service_unit_prefix }}{{ item.0 }}{{ kolla_service_unit_suffix }}.service {{ item.0 }} {{ post_delay }}
{% endif -%}
